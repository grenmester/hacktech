<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
	<title>TubeStats</title>
    <!-- Bootstrap core CSS -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="../static/css/main.css" rel="stylesheet">
  </head>
  <body>
    <div class = "container-fluid">
        <div class = "row" style = "background-color: #1abc9c; display: flex">
            <div class = "col-xs-12">
                <h2 style ="margin-left:20px;">TubeStats - Individual</h2>
            </div>
        </div>
        <div class = "row">
            <div class = "col-xs-6 centered">
                <a href="individual" class="btn-block" style = "font-size: large; margin-top: 15px; margin-bottom: 15px" role="button">Individual</a>
            </div>
            <div class = "col-xs-6 centered">
                <a href="comparison" class="btn-block" style = "font-size: large; margin-top: 15px; margin-bottom: 15px" role="button">Comparison</a>
            </div>
        </div>
    </div>

	<!-- +++++ Welcome Section +++++ -->
	<div id="ww">
	    <div class="container">
			<div class="row">
				<div class="col-lg-8 col-lg-offset-2 centered">
					<h1>HackTech 2017</h1>
					<p>Welcome Hackers! TubeStats is a web application where you can type in the URL of a youtube video and get back its statistics according to comments and ratings.</p>
                    <form action="" method="post">
				        <label>Youtube URL: </label>
				        <input type="text" name="video-url" id="video-url" styles="width:450px">
				        <input type="button" value="Submit" onclick="return loadXMLIndividual()">
                    </form>
                </div><!-- /col-lg-8 -->
			</div><!-- /row -->
	    </div> <!-- /container -->
	</div><!-- /ww -->

	<!-- +++++ Projects Section +++++ -->
	<div class="container pt">
		<div class="row mt centered">
        {% if url %}
		<p id="url">Video</p>
        <iframe width="853" height="480" src="https://www.youtube.com/watch?v=ulANhxcLvyU" frameborder="0" allowfullscreen></iframe>
        {% endif %}
		</div><!-- /row -->
		<div class="row mt centered">
		    <div id="ww">
                <div id="myDiv"></div>
                <p id="normalizedScore">This is always here</p>
                {% if normalized_score %}
                <p>The comment score was {{ normalized_score }}</p>
                {% endif %}
	        </div><!-- /ww -->
		</div><!-- /row -->
	</div><!-- /container -->

	<!-- +++++ Footer Section +++++ -->
	<div id="footer">
		<div class="container">
			<div class="row">
				<div class="col-lg-4">
					<h4 class = "text-center">Made at CalTech</h4>
					<p class="text-center">
						3/3/17 - 3/5/17<br/>
						1200 E California Blvd, <br/>
						Pasadena, CA 91125
					</p>
				</div><!-- /col-lg-4 -->
				<div class="col-lg-4">
					<h4 class="text-center">Our Links</h4>
					<p class = "text-center">
						<a class="white-link" href="https://github.com/grenmester/hacktech" target="_blank">Github</a><br/>
						<a class="white-link" href="#">Devpost</a><br/>
					</p>
				</div><!-- /col-lg-4 -->
				<div class = "col-lg-4">
					<h4 class = "text-center">The Team</h4>
					<div class="col-lg-6" style = "float:left">
						<p class="text-center">Arkin Gupta<br/>
						Ryan Fong</p>
					</div><!-- /col-lg-4 -->
					<div class = "col-lg-6" style = "float:right">
						<p class = "text-center">Jacky Lee</br>
						Terrence Ho</p>
				</div>
			</div>
		</div>
	</div>
    <script src="/static/js/hover.zoom.js"></script>
    <script src="/static/js/hover.zoom.conf.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        function loadXMLIndividual()
        {
            var req = new XMLHttpRequest()
            req.onreadystatechange = function()
            {
                if (req.readyState == 4)
                {
                    if (req.status != 200)
                    {
                        //error handling code here
                    }
                    else
                    {
                        var response = JSON.parse(req.responseText)
                        document.getElementById('normalizedScore').innerHTML = response.normalized_score
                        document.getElementById('url').innerHTML = response.url

                    }
                }
            }

            req.open('POST', '/ajax')
            req.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
            var videoUrl = document.getElementById('video-url').value
            var postVars = 'url=' + videoUrl
            req.send(postVars)

            return false
        }
    </script>
  </body>
</html>
